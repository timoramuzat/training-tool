
<app-studentmenu></app-studentmenu>
<div *ngIf="load; then thenBlock else myelseBlock"></div>
<ng-template #thenBlock>
  <app-loading></app-loading>
</ng-template>
<ng-template #myelseBlock>
  <div class="container mx-auto">
    <div class="quiz_box activeQuiz">
      <header>
        <div class="title">{{quizname}}</div>
        <div class="timer">
          <div class="time_left_txt">Time Left</div>
          <div class="timer_sec">{{timePerQuestion}}</div>
        </div>
        <div class="time_line" style="width: 385px;"></div>
      </header>
      <section>
        <div class="que_text" [innerHTML]="oneQuestion.questionText"></div>
        <div class="option_list" id="options"
             *ngFor="let user of oneQuestion.options;index as i">

          <label class="options">{{user.optionText}}<input type="radio" value="{{user.optionValue}}" name="option"
                                                           (change)="answer(oneQuestion.questionId,user.optionValue)"> <span class="checkmark"></span> </label>
        </div>
      </section>


      <footer>
        <div class="total_que">({{questionCounter}} of {{totalQuestion}}) </div>

      </footer>
      <div class="d-flex align-items pt-3" style=""
           *ngIf="!finalsubmit">
        <div class="timer">sss</div>
        <div class="next_btn"> <button class="btn btn-primary" [disabled]="flageLast"
                                                (click)="nextQuestion()">Next</button> </div>
        <div  *ngIf="flageLast" class="clsbtnright"> <button class="btn btn-success" [disabled]="!flageLast" data-toggle="modal"
                                                 data-target="#myModal" (click)="submitQuiz()">Submit</button> </div>
      </div>
    </div>

    <h4 *ngIf="finalsubmit">You have scored {{score}}/{{totalQuestion}}</h4>
  </div>
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <div class="card">
        <div class="text-right cross"> <i class="fa fa-times"></i> </div>
        <div class="card-body text-center">
          <h4>CONGRATULATIONS!</h4>



          <h4>You have scored {{score}}/{{totalQuestion}}</h4>

          <ng-container *ngIf="score <1">
Reward for score: 0
          </ng-container>


          <ng-container *ngIf="score is 1/2">
            Reward for score is 1
          </ng-container>

          <ng-container *ngIf="score is 2/2">
            Reward for score is 2
          </ng-container>
          <div *ngFor="let one of allQuestions;index as j">
            <div class="container mt-sm-5 my-1">
              <div class="question ml-sm-5 pl-sm-5 pt-2">

                <div class="py-2"> <ng-container *ngIf="answerCorrect.includes(j)">
                  "CORRECT"
                </ng-container> <b>{{j+1}} - <div [innerHTML]="one.questionText"></div></b></div>

                <ng-container *ngFor="let user of oneQuestion.options;index as i">

                  {{user.optionText}}










                </ng-container>
                <ng-container *ngIf="answerCorrect.includes(j)">
                  "CORRECT"
                </ng-container>




              </div>


            </div>
          </div>






          <button class="btn btn-out btn-square continue mt-5" style="cursor: pointer;"
                  (click)="navigatehome()">CONTINUE</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
